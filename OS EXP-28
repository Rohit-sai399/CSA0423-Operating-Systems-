/* mygrep.c */
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[]) {
    if(argc < 3) { fprintf(stderr,"Usage: %s pattern file1 [file2 ...]\n", argv[0]); return 1; }
    const char *pat = argv[1];
    char line[4096];
    for(int i=2;i<argc;i++){
        FILE *f = fopen(argv[i],"r");
        if(!f){ perror(argv[i]); continue; }
        int lineno = 0;
        while(fgets(line, sizeof(line), f)){
            lineno++;
            if(strstr(line, pat)) {
                printf("%s:%d:%s", argv[i], lineno, line);
            }
        }
        fclose(f);
    }
    return 0;
}
