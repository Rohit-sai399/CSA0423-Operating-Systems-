/* fifo_paging.c */
#include <stdio.h>
#include <stdlib.h>

int main(){
    int frames, n;
    printf("Number of frames: "); scanf("%d",&frames);
    printf("Length of reference string: "); scanf("%d",&n);
    int ref[n];
    printf("Enter reference string (space separated):\n");
    for(int i=0;i<n;i++) scanf("%d",&ref[i]);

    int *frame = malloc(frames * sizeof(int));
    for(int i=0;i<frames;i++) frame[i]=-1;
    int pointer = 0, faults=0;

    for(int i=0;i<n;i++){
        int page = ref[i];
        int found=0;
        for(int j=0;j<frames;j++) if(frame[j]==page) found=1;
        if(!found){
            frame[pointer] = page;
            pointer = (pointer+1)%frames;
            faults++;
        }
        printf("Ref %d : ", page);
        for(int j=0;j<frames;j++) printf("%d ", frame[j]);
        printf("\n");
    }
    printf("Total page faults: %d\n", faults);
    free(frame);
    return 0;
}
